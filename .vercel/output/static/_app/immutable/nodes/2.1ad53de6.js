import{s as A,n as V,r as Z,e as te,h as pe,b as me,t as ke,o as ve}from"../chunks/scheduler.4f524d2e.js";import{S as R,i as B,g as w,h as x,j as C,f as k,k as b,a as D,I as ne,J as ye,s as S,m as $,c as L,n as N,K as U,C as h,D as j,r as J,L as M,u as q,v as z,d as I,t as F,w as G,o as X,B as le,M as W,e as H,b as be,p as _e}from"../chunks/index.096ecd25.js";import{t as O,e as K,b as Y}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.78f221c8.js";import{j as we}from"../chunks/singletons.78f7b6fa.js";import{w as xe}from"../chunks/index.54d44800.js";const Te=async({fetch:l})=>{async function e(){return(await(await l("/api/feedbacks",{method:"GET"})).json()).feedbacks}return{feedbacks:e()}},tt=Object.freeze(Object.defineProperty({__proto__:null,load:Te},Symbol.toStringTag,{value:"Module"})),Q=we("invalidate"),ee="http://localhost:3000";async function se(l){const n=(l.headers.get("Content-Type")||"").includes("application/json"),a=n?await l.json():await l.text();if(!l.ok){const t=n&&a.message||l.statusText;throw new Error(t)}return a}const Ee=()=>{const{subscribe:l,set:e,update:n}=xe({page_loading:!1,feedbacks:[],setPageLoading:a=>n(t=>({...t,page_loading:a})),addFeedback:async a=>{n(t=>({...t,page_loading:!0}));try{const t=await fetch(`${ee}/api/feedbacks/`,{method:"POST",headers:{"Content-Type":"application/json"},body:a});await se(t).then(s=>s.data.feedback),await Q("/api/feedbacks"),n(s=>({...s,page_loading:!1})),O.push("Added Feedback Successfully",{classes:["success"]})}catch(t){n(s=>({...s,page_loading:!1})),console.error(t),O.push(t.toString(),{classes:["danger"]})}},editFeedback:async(a,t)=>{n(s=>({...s,page_loading:!0}));try{const s=await fetch(`${ee}/api/feedbacks/${a}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:t});await se(s).then(r=>r.data.feedback),await Q("/api/feedbacks"),n(r=>({...r,page_loading:!1})),O.push("Edited Feedback Successfully",{classes:["success"]})}catch(s){n(r=>({...r,page_loading:!1})),console.error(s),O.push(s.toString(),{classes:["danger"]})}},deleteFeedback:async a=>{n(t=>({...t,page_loading:!0}));try{const t=await fetch(`${ee}/api/feedbacks/${a}`,{method:"DELETE"});if(!t.ok){const s=await t.json();throw s?new Error(s.message):new Error(`API error: ${t.status}`)}await Q("/api/feedbacks"),n(s=>({...s,page_loading:!1})),O.push("Feedback deleted successfully",{classes:["success"]})}catch(t){n(s=>({...s,page_loading:!1})),console.error(t),O.push(t.toString(),{classes:["danger"]})}}});return{subscribe:l,set:e,update:n}},ae=Ee();function oe(l,e,n){const a=l.slice();return a[6]=e[n],a}function ie(l){let e,n,a,t,s=l[6]+"",r,o,i,c,g,_;function d(){return l[5](l[6])}return c=ye(l[4][0]),{c(){e=w("li"),n=w("input"),a=S(),t=w("label"),r=$(s),o=S(),this.h()},l(u){e=x(u,"LI",{class:!0});var f=C(e);n=x(f,"INPUT",{type:!0,class:!0,id:!0,name:!0}),a=L(f),t=x(f,"LABEL",{for:!0,class:!0});var p=C(t);r=N(p,s),p.forEach(k),o=L(f),f.forEach(k),this.h()},h(){b(n,"type","radio"),b(n,"class","opacity-0"),b(n,"id",`feedback-rating-radio-button-${l[6]}`),b(n,"name","rating"),n.__value=l[6],U(n,n.__value),b(t,"for",`feedback-rating-radio-button-${l[6]}`),b(t,"class","absolute w-full h-full flex items-center justify-center rounded-full top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 cursor-pointer hover:bg-pink-500 hover:text-white transition duration-300"),b(e,"class",i="relative w-14 h-14 p-3 text-center rounded-full border-gray-300 border-2 transition duration-300 "+(l[0]===l[6]?"bg-pink-500 text-white":"bg-gray-200")),c.p(n)},m(u,f){D(u,e,f),h(e,n),n.checked=n.__value===l[0],h(e,a),h(e,t),h(t,r),h(e,o),g||(_=[j(n,"change",l[3]),j(n,"change",d)],g=!0)},p(u,f){l=u,f&1&&(n.checked=n.__value===l[0]),f&1&&i!==(i="relative w-14 h-14 p-3 text-center rounded-full border-gray-300 border-2 transition duration-300 "+(l[0]===l[6]?"bg-pink-500 text-white":"bg-gray-200"))&&b(e,"class",i)},d(u){u&&k(e),c.r(),g=!1,Z(_)}}}function Ce(l){let e,n=K(Array.from({length:10},ce)),a=[];for(let t=0;t<n.length;t+=1)a[t]=ie(oe(l,n,t));return{c(){e=w("ul");for(let t=0;t<a.length;t+=1)a[t].c();this.h()},l(t){e=x(t,"UL",{class:!0});var s=C(e);for(let r=0;r<a.length;r+=1)a[r].l(s);s.forEach(k),this.h()},h(){b(e,"class","list-none flex items-center justify-around my-7")},m(t,s){D(t,e,s);for(let r=0;r<a.length;r+=1)a[r]&&a[r].m(e,null)},p(t,[s]){if(s&3){n=K(Array.from({length:10},ce));let r;for(r=0;r<n.length;r+=1){const o=oe(t,n,r);a[r]?a[r].p(o,s):(a[r]=ie(o),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},i:V,o:V,d(t){t&&k(e),ne(a,t)}}}const ce=(l,e)=>e+1;function Se(l,e,n){let{selected:a=0}=e,{onchange:t=()=>{}}=e;const s=c=>{n(0,a=c),t(a)},r=[[]];function o(){a=this.__value,n(0,a)}const i=c=>s(c);return l.$$set=c=>{"selected"in c&&n(0,a=c.selected),"onchange"in c&&n(2,t=c.onchange)},[a,s,t,o,r,i]}class Le extends R{constructor(e){super(),B(this,e,Se,Ce,A,{selected:0,onchange:2})}}function ue(l){let e,n;return{c(){e=w("div"),n=$(l[1]),this.h()},l(a){e=x(a,"DIV",{class:!0});var t=C(e);n=N(t,l[1]),t.forEach(k),this.h()},h(){b(e,"class","pt-3 text-center text-purple-600")},m(a,t){D(a,e,t),h(e,n)},p(a,t){t&2&&X(n,a[1])},d(a){a&&k(e)}}}function De(l){let e,n,a,t='<label for="feedback-input" class="inline-block text-center text-2xl font-bold">How would you rate your service with us?</label>',s,r,o,i,c,g,_,d,u,f,p,E;r=new Le({props:{selected:l[2],onchange:l[5]}});let T=l[1]&&ue(l);return{c(){e=w("div"),n=w("form"),a=w("div"),a.innerHTML=t,s=S(),J(r.$$.fragment),o=S(),i=w("div"),c=w("input"),g=S(),_=w("button"),d=$("Send"),u=S(),T&&T.c(),this.h()},l(m){e=x(m,"DIV",{class:!0});var v=C(e);n=x(v,"FORM",{});var y=C(n);a=x(y,"DIV",{class:!0,"data-svelte-h":!0}),M(a)!=="svelte-p5cola"&&(a.innerHTML=t),s=L(y),q(r.$$.fragment,y),o=L(y),i=x(y,"DIV",{class:!0});var P=C(i);c=x(P,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),g=L(P),_=x(P,"BUTTON",{type:!0,class:!0});var re=C(_);d=N(re,"Send"),re.forEach(k),P.forEach(k),u=L(y),T&&T.l(y),y.forEach(k),v.forEach(k),this.h()},h(){b(a,"class","max-w-md mx-auto"),b(c,"type","text"),b(c,"id","feedback-input"),b(c,"class","flex-grow border-none text-lg focus:outline-none"),b(c,"placeholder","Tell us something that keeps you coming back"),b(_,"type","submit"),_.disabled=l[3],b(_,"class","border-0 rounded-md w-28 h-10 cursor-pointer bg-indigo-600 text-white hover:bg-indigo-500 disabled:bg-gray-400 disabled:text-gray-800 disabled:cursor-not-allowed"),b(i,"class","flex border rounded-lg my-4 px-2 py-3"),b(e,"class","bg-white text-gray-700 rounded-lg p-8 my-5 relative")},m(m,v){D(m,e,v),h(e,n),h(n,a),h(n,s),z(r,n,null),h(n,o),h(n,i),h(i,c),U(c,l[0]),h(i,g),h(i,_),h(_,d),h(n,u),T&&T.m(n,null),f=!0,p||(E=[j(c,"input",l[6]),j(n,"submit",l[4])],p=!0)},p(m,[v]){const y={};v&4&&(y.selected=m[2]),v&4&&(y.onchange=m[5]),r.$set(y),v&1&&c.value!==m[0]&&U(c,m[0]),(!f||v&8)&&(_.disabled=m[3]),m[1]?T?T.p(m,v):(T=ue(m),T.c(),T.m(n,null)):T&&(T.d(1),T=null)},i(m){f||(I(r.$$.fragment,m),f=!0)},o(m){F(r.$$.fragment,m),f=!1},d(m){m&&k(e),G(r),T&&T.d(),p=!1,Z(E)}}}const fe=10;function Ie(l,e,n){let a,t;te(l,ae,_=>n(7,t=_));let s=null,r=10,o="";async function i(_){if(_.preventDefault(),o.trim().length<fe){n(1,s=`feedback text must be at least ${fe} characters`);return}const d=JSON.stringify({text:o,rating:r});t.addFeedback(d),n(0,o=""),n(2,r=10)}const c=_=>n(2,r=_);function g(){o=this.value,n(0,o)}return l.$$.update=()=>{l.$$.dirty&1&&n(3,a=o.trim().length===0),l.$$.dirty&1&&o.trim().length>10&&n(1,s=null)},[o,s,r,a,i,c,g]}class Fe extends R{constructor(e){super(),B(this,e,Ie,De,A,{})}}function $e(l){let e,n,a,t,s,r,o,i;return{c(){e=w("div"),n=w("h4"),a=$(l[0]),t=$(" Reviews"),s=S(),r=w("h4"),o=$("Ratings Average: "),i=$(l[1]),this.h()},l(c){e=x(c,"DIV",{class:!0});var g=C(e);n=x(g,"H4",{});var _=C(n);a=N(_,l[0]),t=N(_," Reviews"),_.forEach(k),s=L(g),r=x(g,"H4",{});var d=C(r);o=N(d,"Ratings Average: "),i=N(d,l[1]),d.forEach(k),g.forEach(k),this.h()},h(){b(e,"class","flex justify-between items-center mb-11 text-white")},m(c,g){D(c,e,g),h(e,n),h(n,a),h(n,t),h(e,s),h(e,r),h(r,o),h(r,i)},p(c,[g]){g&1&&X(a,c[0]),g&2&&X(i,c[1])},i:V,o:V,d(c){c&&k(e)}}}function Ne(l,e,n){let a,t,s,{feedbacks:r}=e;return l.$$set=o=>{"feedbacks"in o&&n(2,r=o.feedbacks)},l.$$.update=()=>{l.$$.dirty&4&&n(0,a=r.length),l.$$.dirty&4&&n(3,t=r.reduce((o,i)=>o+i.rating,0)),l.$$.dirty&9&&n(1,s=a>0?(t/a).toFixed(2):"0.00")},[a,s,r,t]}class je extends R{constructor(e){super(),B(this,e,Ne,$e,A,{feedbacks:2})}}function Pe(l){let e,n=l[0].text+"",a;return{c(){e=w("p"),a=$(n)},l(t){e=x(t,"P",{});var s=C(e);a=N(s,n),s.forEach(k)},m(t,s){D(t,e,s),h(e,a)},p(t,s){s&1&&n!==(n=t[0].text+"")&&X(a,n)},d(t){t&&k(e)}}}function Me(l){let e,n,a,t,s,r="Save",o,i,c="Cancel",g,_;return{c(){e=w("div"),n=w("input"),a=S(),t=w("div"),s=w("button"),s.textContent=r,o=S(),i=w("button"),i.textContent=c,this.h()},l(d){e=x(d,"DIV",{class:!0});var u=C(e);n=x(u,"INPUT",{type:!0,class:!0}),a=L(u),t=x(u,"DIV",{class:!0});var f=C(t);s=x(f,"BUTTON",{class:!0,"data-svelte-h":!0}),M(s)!=="svelte-eaznvs"&&(s.textContent=r),o=L(f),i=x(f,"BUTTON",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1kg6n0f"&&(i.textContent=c),f.forEach(k),u.forEach(k),this.h()},h(){b(n,"type","text"),b(n,"class","border rounded-lg p-2 w-full focus:outline-none"),b(s,"class","text-pink-500 hover:text-pink-700"),b(i,"class","hover:text-pink-700"),b(t,"class","flex gap-2"),b(e,"class","flex justify-between gap-4")},m(d,u){D(d,e,u),h(e,n),U(n,l[3]),l[8](n),h(e,a),h(e,t),h(t,s),h(t,o),h(t,i),g||(_=[j(n,"input",l[7]),j(s,"click",l[5]),j(i,"click",l[4])],g=!0)},p(d,u){u&8&&n.value!==d[3]&&U(n,d[3])},d(d){d&&k(e),l[8](null),g=!1,Z(_)}}}function Oe(l){let e,n,a=l[0].rating+"",t,s,r,o="X",i,c,g="Edit",_,d,u,f,p;function E(v,y){return v[1]?Me:Pe}let T=E(l),m=T(l);return{c(){e=w("div"),n=w("div"),t=$(a),s=S(),r=w("button"),r.textContent=o,i=S(),c=w("button"),c.textContent=g,_=S(),m.c(),this.h()},l(v){e=x(v,"DIV",{class:!0});var y=C(e);n=x(y,"DIV",{class:!0});var P=C(n);t=N(P,a),P.forEach(k),s=L(y),r=x(y,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),M(r)!=="svelte-14se5aq"&&(r.textContent=o),i=L(y),c=x(y,"BUTTON",{class:!0,"data-svelte-h":!0}),M(c)!=="svelte-1dqci62"&&(c.textContent=g),_=L(y),m.l(y),y.forEach(k),this.h()},h(){b(n,"class","bg-pink-500 text-white rounded-full border-2 border-gray-200 w-12 h-12 flex items-center justify-center text-2xl font-bold absolute top-0 left-0 -mt-4 -ml-4"),b(r,"type","button"),b(r,"class","absolute text-gray-900 font-semibold top-2 right-4"),b(c,"class","absolute top-2 right-12 text-pink-500 hover:text-pink-700"),le(c,"hidden",l[1]),b(e,"class","bg-white text-gray-700 rounded-lg p-8 my-5 relative")},m(v,y){D(v,e,y),h(e,n),h(n,t),h(e,s),h(e,r),h(e,i),h(e,c),h(e,_),m.m(e,null),u=!0,f||(p=[j(r,"click",l[6]),j(c,"click",l[4])],f=!0)},p(v,[y]){(!u||y&1)&&a!==(a=v[0].rating+"")&&X(t,a),(!u||y&2)&&le(c,"hidden",v[1]),T===(T=E(v))&&m?m.p(v,y):(m.d(1),m=T(v),m&&(m.c(),m.m(e,null)))},i(v){u||(v&&pe(()=>{u&&(d||(d=W(e,Y,{},!0)),d.run(1))}),u=!0)},o(v){v&&(d||(d=W(e,Y,{},!1)),d.run(0)),u=!1},d(v){v&&k(e),m.d(),v&&d&&d.end(),f=!1,Z(p)}}}function Ve(l){return window.confirm(l)}function He(l,e,n){let a;te(l,ae,u=>n(9,a=u));let{feedback:t}=e,s=!1,r=t.text;function o(){n(1,s=!s),n(3,r=t.text)}async function i(){if(t.text===r){o();return}const u=JSON.stringify({...t,text:r});a.editFeedback(t.id,u),o()}const c=async()=>{Ve("Do you really want to delete this item?")&&a.deleteFeedback(t.id)};let g=null;function _(){r=this.value,n(3,r)}function d(u){me[u?"unshift":"push"](()=>{g=u,n(2,g)})}return l.$$set=u=>{"feedback"in u&&n(0,t=u.feedback)},l.$$.update=()=>{l.$$.dirty&6&&s&&(async()=>(await ke(),g==null||g.focus()))()},[t,s,g,r,o,i,c,_,d]}class Ae extends R{constructor(e){super(),B(this,e,He,Oe,A,{feedback:0})}}function Re(l){let e,n='<div class="bg-gray-300 text-gray-200 rounded-full border-2 border-gray-200 w-12 h-12 flex items-center justify-center text-2xl font-bold absolute top-0 left-0 -mt-4 -ml-4">...</div> <button type="button" class="absolute font-bold top-2 right-4 cursor-pointer bg-transparent border-none">...</button> <p class="bg-gray-300 h-4 w-3/4 mt-5 rounded"></p>',a,t;return{c(){e=w("div"),e.innerHTML=n,this.h()},l(s){e=x(s,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-12osx9h"&&(e.innerHTML=n),this.h()},h(){b(e,"class","bg-gray-200 animate-pulse rounded-lg p-8 my-5 relative")},m(s,r){D(s,e,r),t=!0},p:V,i(s){t||(s&&pe(()=>{t&&(a||(a=W(e,Y,{},!0)),a.run(1))}),t=!0)},o(s){s&&(a||(a=W(e,Y,{},!1)),a.run(0)),t=!1},d(s){s&&k(e),s&&a&&a.end()}}}class Be extends R{constructor(e){super(),B(this,e,null,Re,A,{})}}function de(l,e,n){const a=l.slice();return a[9]=e[n],a}function Ue(l,e,n){const a=l.slice();return a[6]=e[n],a}function Je(l){let e,n,a=K(l[2]),t=[];for(let r=0;r<a.length;r+=1)t[r]=he(de(l,a,r));const s=r=>F(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=H()},l(r){for(let o=0;o<t.length;o+=1)t[o].l(r);e=H()},m(r,o){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(r,o);D(r,e,o),n=!0},p(r,o){if(o&4){a=K(r[2]);let i;for(i=0;i<a.length;i+=1){const c=de(r,a,i);t[i]?(t[i].p(c,o),I(t[i],1)):(t[i]=he(c),t[i].c(),I(t[i],1),t[i].m(e.parentNode,e))}for(_e(),i=a.length;i<t.length;i+=1)s(i);be()}},i(r){if(!n){for(let o=0;o<a.length;o+=1)I(t[o]);n=!0}},o(r){t=t.filter(Boolean);for(let o=0;o<t.length;o+=1)F(t[o]);n=!1},d(r){r&&k(e),ne(t,r)}}}function qe(l){let e,n,a=K(Array.from({length:4},Xe)),t=[];for(let s=0;s<a.length;s+=1)t[s]=ze(Ue(l,a,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=H()},l(s){for(let r=0;r<t.length;r+=1)t[r].l(s);e=H()},m(s,r){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,r);D(s,e,r),n=!0},p:V,i(s){if(!n){for(let r=0;r<a.length;r+=1)I(t[r]);n=!0}},o(s){t=t.filter(Boolean);for(let r=0;r<t.length;r+=1)F(t[r]);n=!1},d(s){s&&k(e),ne(t,s)}}}function he(l){let e,n;return e=new Ae({props:{feedback:l[9]}}),{c(){J(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,t){z(e,a,t),n=!0},p(a,t){const s={};t&4&&(s.feedback=a[9]),e.$set(s)},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){G(e,a)}}}function ze(l){let e,n;return e=new Be({}),{c(){J(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,t){z(e,a,t),n=!0},i(a){n||(I(e.$$.fragment,a),n=!0)},o(a){F(e.$$.fragment,a),n=!1},d(a){G(e,a)}}}function ge(l){let e,n='<span class="!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]">Loading...</span>';return{c(){e=w("div"),e.innerHTML=n,this.h()},l(a){e=x(a,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),M(e)!=="svelte-vw8e6m"&&(e.innerHTML=n),this.h()},h(){b(e,"class","fixed top-5 left-5 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-yellow-400 border-r-transparent align-[-0.125em] text-warning motion-reduce:animate-[spin_1.5s_linear_infinite]"),b(e,"role","status")},m(a,t){D(a,e,t)},d(a){a&&k(e)}}}function Ge(l){let e,n,a,t,s,r,o,i,c,g;n=new Fe({}),t=new je({props:{feedbacks:l[2]}});const _=[qe,Je],d=[];function u(p,E){return p[0]?0:1}r=u(l),o=d[r]=_[r](l);let f=l[1]&&ge();return{c(){e=w("main"),J(n.$$.fragment),a=S(),J(t.$$.fragment),s=S(),o.c(),i=S(),f&&f.c(),c=H(),this.h()},l(p){e=x(p,"MAIN",{class:!0});var E=C(e);q(n.$$.fragment,E),a=L(E),q(t.$$.fragment,E),s=L(E),o.l(E),E.forEach(k),i=L(p),f&&f.l(p),c=H(),this.h()},h(){b(e,"class","md:container mt-24 px-5")},m(p,E){D(p,e,E),z(n,e,null),h(e,a),z(t,e,null),h(e,s),d[r].m(e,null),D(p,i,E),f&&f.m(p,E),D(p,c,E),g=!0},p(p,[E]){const T={};E&4&&(T.feedbacks=p[2]),t.$set(T);let m=r;r=u(p),r===m?d[r].p(p,E):(_e(),F(d[m],1,1,()=>{d[m]=null}),be(),o=d[r],o?o.p(p,E):(o=d[r]=_[r](p),o.c()),I(o,1),o.m(e,null)),p[1]?f||(f=ge(),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i(p){g||(I(n.$$.fragment,p),I(t.$$.fragment,p),I(o),g=!0)},o(p){F(n.$$.fragment,p),F(t.$$.fragment,p),F(o),g=!1},d(p){p&&(k(e),k(i),k(c)),G(n),G(t),d[r].d(),f&&f.d(p)}}}const Xe=(l,e)=>e+1;function Ke(l,e,n){let a,t;te(l,ae,c=>n(4,t=c));let{data:s}=e,r=!1,o=!0;async function i(){t.setPageLoading(!0),await Q("/api/feedbacks"),t.setPageLoading(!1)}return ve(()=>(o&&n(0,o=!1),window.addEventListener("focus",i),()=>{window.removeEventListener("focus",i)})),l.$$set=c=>{"data"in c&&n(3,s=c.data)},l.$$.update=()=>{l.$$.dirty&8&&n(2,{feedbacks:a}=s,a),l.$$.dirty&17&&n(1,r=t.page_loading||o)},[o,r,a,s,t]}class nt extends R{constructor(e){super(),B(this,e,Ke,Ge,A,{data:3})}}export{nt as component,tt as universal};
